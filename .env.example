# ============================================
# Polymarket Configuration
# ============================================

# Runtime mode: read_only | trading
# - read_only: Market data only, no private key needed
# - trading: Full trading capabilities, requires all credentials
POLYMARKET_MODE=read_only

# ============================================
# Trading Credentials (TRADING mode only)
# ============================================

# L1 Authentication: Private key for signing
# Required for: Creating API credentials, signing orders
POLYMARKET_PRIVATE_KEY=0x...

# L2 Authentication: API credentials (derived from L1)
# Can be obtained via py-clob-client's create_or_derive_api_key()
POLYMARKET_API_KEY=...
POLYMARKET_API_SECRET=...
POLYMARKET_API_PASSPHRASE=...

# Funder address (for certain signature types)
POLYMARKET_FUNDER=

# ============================================
# Configuration
# ============================================

# Chain ID: 137 = Polygon mainnet
POLYMARKET_CHAIN_ID=137

# API Endpoints (with defaults)
POLYMARKET_CLOB_URL=https://clob.polymarket.com
POLYMARKET_GAMMA_URL=https://gamma-api.polymarket.com
POLYMARKET_DATA_URL=https://data-polymarket.com

# ============================================
# Runtime Options
# ============================================

# Dry run mode: true = simulate orders without sending
DRY_RUN=true

# Log level: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# JSON logging: true = structured JSON logs, false = human-readable
LOG_JSON=false

# ============================================
# Bot Configuration
# ============================================

# === AI Model Configuration ===
# GPT-5-Nano with reasoning tokens (recommended)
OPENAI_MODEL=gpt-5-nano
OPENAI_REASONING_EFFORT=medium  # low, medium, high
OPENAI_API_KEY=sk-...

# Tavily API (for sentiment analysis)
TAVILY_API_KEY=tvly-...

# === BTC Price Source ===
# Uses Polymarket WebSocket for real-time prices (consistent with market resolution)
# Falls back to Binance if WebSocket unavailable
BTC_PRICE_SOURCE=polymarket
BTC_PRICE_CACHE_SECONDS=10  # Reduced from 30 (real-time updates)

# Trading Parameters
BOT_INTERVAL_SECONDS=180
BOT_CONFIDENCE_THRESHOLD=0.75
BOT_MAX_POSITION_PERCENT=0.10
BOT_MAX_POSITION_DOLLARS=5.00  # Absolute dollar cap per bet (overrides percent if lower)
BOT_MAX_EXPOSURE_PERCENT=0.50

# Trade Execution Safety (JIT price checks)
TRADE_MAX_UNFAVORABLE_MOVE_PCT=10.0  # Skip trade if price moved 10%+ worse since analysis
TRADE_MAX_FAVORABLE_WARN_PCT=5.0     # Warn if price moved 5%+ better (unexpected opportunity)

# Stop-Loss
STOP_LOSS_ODDS_THRESHOLD=0.40
STOP_LOSS_FORCE_EXIT_MINUTES=5

# Logging
BOT_LOG_DECISIONS=true
BOT_LOG_FILE=logs/auto_trade.log

# Signature type: 0 = EOA, 1 = Magic/Email, 2 = Safe
POLYMARKET_SIGNATURE_TYPE=1

# ============================================
# Telegram Bot Configuration
# ============================================
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here

# ============================================
# Emergency Pause System
# ============================================
EMERGENCY_PAUSE_ENABLED=false

# ============================================
# Price Fetching Configuration
# ============================================
# Timeout per API attempt (seconds)
BTC_FETCH_TIMEOUT=30

# Number of retries after initial attempt
BTC_FETCH_MAX_RETRIES=2

# Initial retry delay in seconds (doubles each retry)
BTC_FETCH_RETRY_DELAY=2.0

# Max age for stale cache usage (seconds)
BTC_CACHE_STALE_MAX_AGE=600

# Price agreement tolerance for settlement (%)
BTC_SETTLEMENT_TOLERANCE_PCT=0.5

# ============================================
# Settlement Configuration
# ============================================
# How often to run settlement cycle
SETTLEMENT_INTERVAL_MINUTES=10

# Max trades to process per cycle
SETTLEMENT_BATCH_SIZE=50

# Alert if trade pending this long
SETTLEMENT_ALERT_LAG_HOURS=1
